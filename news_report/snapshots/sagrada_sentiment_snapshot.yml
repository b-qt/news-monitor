# This snapshot captures changes in the sentiment analysis of news articles related to the Sagrada Familia.
snapshots:
  - name: sagrada_sentiment_snapshot
    target_schema: news_report
    target_database: dev
    tags:
      - sagrada_sentiment
    relations: source('spain_news_source', 'spain_news_raw')
    config:
      schema: news_report
      database: dev_news_report
      unique_key: link
      strategy: timestamp
      updated_at: published_at
      check_cols: ['sentiment_label', 'sentiment_score']
      dbt_valid_to_current: "to_date('9999-12-31 23:59:59')"
    snapshot_meta_column_names:
      dbt_valid_from: valid_from
      dbt_valid_to: valid_to